<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<body>
  {% include header.html %}

  <div class="container-fluid">

  <!-- Верхняя секция с фоном и поиском -->
<section class="hero-section">
  <div class="hero-overlay">
    <div class="container d-flex justify-content-center align-items-center" style="height:500px;">
      <div class="hero-search w-100" style="max-width:900px;">
        <form action="/search" method="get" class="d-flex w-100">
          <input type="text" name="q" 
                 placeholder="Найти рецепт, ингредиент, вид или стиль блюда, технику приготовления..." 
                 class="form-control border-0 flex-grow-1" 
                 style="border-radius:0; padding:15px; font-size:18px;">
          <button type="submit" class="btn" 
                  style="border-radius:0; padding:0 25px; font-size:18px; 
                         background: linear-gradient(0turn, rgba(255,106,40,1) 0%, rgba(254,47,87,1) 100%); 
                         color:#fff; border:none;">
            Найти
          </button>
        </form>
      </div>
    </div>
  </div>
</section>

  <section class="section">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="row masonry-container pt-5">
            {% assign recipes_random = site.recipes | sample: 100 %}
{% for post in recipes_random %}
              {% if post.featured_image %}
                <div class="col-lg-3 col-sm-6 mb-5 masonry-item">
                    <div class="card p-0 border-0 rounded-0 hover-shadow">
                        <a href="{{ post.url | relative_url }}">
                            <img class="img-fluid rounded-top rounded-0" src="{{ post.featured_image | relative_url }}" alt="feature-image">
                            <div class="card-body" style="position: relative;">
                                <ul class="list-inline mb-3">
                                    {% if post.collections and post.collections.catalogue %}
                                        {% for item in post.collections.catalogue %}
                                            <li class="list-inline-item mr-3 text-uppercase font-primary font-extra-small" style="font-size: 0.8rem;">
                                                <a href="{{ site.baseurl }}/catalogue/{{ item | downcase | slugify }}" class="text-color">{{ item }}</a>
                                            </li>
                                        {% endfor %}
                                    {% endif %}
                                </ul>
                                <p class="font-secondary mb-3 mt-1 font-extra-small">
                                    Рецепт из книги: <span class="book-title"><a href="{{ post.book.link }}" style="color: #fa8569; font-weight: bold;">{{ post.book.title }}</a></span>
                                </p>
                                <h4 class="mb-3">{{ post.title }}</h4>
                                <p class="font-secondary mb-4">{{ post.content | strip_html | truncatewords: 25 }}</p>
                                <a href="{{ post.url | relative_url }}" class="text-uppercase font-primary font-extra-small" style="color: #fa8569; font-weight: bold; position: absolute; bottom: 15px; left: 0; right: 0; text-align: center;">
                                    Открыть рецепт
                                </a>
                            </div>
                        </a>
                    </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>
  </div>
  <script src="{{ site.baseurl }}/assets/plugins/jQuery/jquery.min.js"></script>
  <script src="{{ site.baseurl }}/assets/plugins/bootstrap/bootstrap.min.js"></script>
  <script src="{{ site.baseurl }}/assets/plugins/slick/slick.min.js"></script>
  <script src="{{ site.baseurl }}/assets/plugins/imagesloaded/imagesloaded.pkgd.js"></script>
  <script src="{{ site.baseurl }}/assets/plugins/masonry/masonry.js"></script>
  <script src="{{ site.baseurl }}/assets/plugins/smooth-scroll/smooth-scroll.js"></script>
  <script src="{{ site.baseurl }}/assets/js/script.js"></script>
  ...
  <script src="{{ site.baseurl }}/assets/js/script.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function(event) {
      // Получаем контейнер с рецептами
      var container = document.querySelector('.masonry-container');

      // Проверяем, существует ли контейнер, прежде чем продолжить
      if (container) {
        // Получаем все элементы рецептов
        var items = Array.from(container.children);

        // Функция для случайного перемешивания массива
        function shuffleArray(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
          return array;
        }

        // Перемешиваем элементы
        var shuffledItems = shuffleArray(items);

        // Очищаем контейнер и добавляем перемешанные элементы обратно
        container.innerHTML = '';
        shuffledItems.forEach(item => container.appendChild(item));
      }
    });
  </script>
</body>
</html>
</body>

</html>
