---
layout: default
---

<div class="book-page-container" style="max-width: 1100px; margin: 0 auto; padding: 40px 20px; font-family: sans-serif;">
  <div style="display: flex; gap: 40px; flex-wrap: wrap;">
    <div style="flex: 0 0 300px; text-align: center;">
      <img src="{{ page.book_cover }}" style="width: 100%; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); margin-bottom: 20px;">
      <a href="{{ page.book_link }}" target="_blank" style="display: block; background: #fa8569; color: #fff; text-decoration: none; padding: 15px; border-radius: 5px; font-weight: bold; text-transform: uppercase;">
        Читать книгу
      </a>
    </div>

    <div style="flex: 1; min-width: 300px;">
      <h1 style="margin-top: 0; font-size: 2rem; color: #333;">{{ page.book_title }}</h1>
      <p style="color: #888; font-style: italic; margin-bottom: 30px;">{{ page.book_author }}</p>
      <div id="loader">Загрузка...</div>
      <div id="book-description" style="line-height: 1.6; color: #444; font-size: 1.1rem;"></div>
    </div>
  </div>
</div>

<script>
(function() {
  const container = document.getElementById('book-description');
  const slug = "{{ page.book_slug }}";
  if (!slug) return;

  fetch('https://api.allorigins.win/get?url=' + encodeURIComponent("https://pro-culinaria.ru/tpost/" + slug))
    .then(r => r.json())
    .then(d => {
      const doc = new DOMParser().parseFromString(d.contents, 'text/html');
      const content = doc.querySelector('.t-records');
      if (content) {
        document.getElementById('loader').style.display = 'none';
        
        // Сначала удаляем всё ненужное прямо в памяти
        content.querySelectorAll('img, .t-btn, .t-form, script, style').forEach(el => el.remove());
        
        // Фильтруем ту самую фразу
        content.querySelectorAll('p').forEach(p => {
          if (p.textContent.includes("350 рублей")) p.remove();
        });

        container.innerHTML = content.innerHTML;
      }
    });
})();
</script>
