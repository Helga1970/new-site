---
layout: default
---

<div class="book-page-wrapper" style="max-width: 1200px; margin: 0 auto; padding: 40px 20px; display: flex; gap: 40px; font-family: sans-serif;">
  
  <div class="book-main-content" style="flex: 2;">
    <img src="{{ page.book_cover }}" alt="{{ page.book_title }}" 
         style="float: left; width: 280px; margin: 0 25px 20px 0; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">

    <h1 style="margin: 0 0 10px 0; font-size: 2.2rem; color: #333;">{{ page.book_title }}</h1>
    <p style="color: #888; font-style: italic; margin-bottom: 25px;">{{ page.book_author }}</p>
      
    <div class="book-description" style="line-height: 1.6; color: #444; font-size: 1.1rem; text-align: justify;">
      {{ content }}
    </div>

    <div style="margin-top: 30px; clear: both;">
      <a href="{{ page.book_link }}" target="_blank" 
         style="display: inline-block; background: #fa8569; color: #fff; text-decoration: none; padding: 15px 35px; border-radius: 5px; font-weight: bold; text-transform: uppercase;">
        Открыть книгу
      </a>
    </div>
  </div>

  <div class="book-sidebar" style="flex: 1; border-left: 1px solid #eee; padding-left: 30px;">
    <div class="sidebar-header" style="display: flex; flex-direction: column; gap: 10px; border-bottom: 2px solid #fa8569; padding-bottom: 10px; margin-bottom: 20px;">
      <h3 style="margin: 0; font-size: 1.3rem; color: #333;">Рецепты из книги (<span id="recipes-count">0</span>)</h3>
      
      <div class="filter-container" style="width: 100%; font-size: 0.85rem;">
        <button class="filter-toggle" id="filter-toggle" style="width: 100%; padding: 8px 12px; background: #fff; border: 1px solid #ddd; border-radius: 4px; display: flex; justify-content: space-between; cursor: pointer;">
          <span class="button-text">Фильтр категорий</span>
          <span class="selected-count" style="color: #fa8569; font-weight: bold;"></span>
        </button>
        <div class="checkbox-list-container hidden" id="checkbox-list-container">
          <div class="checkbox-item all-option">
            <input type="checkbox" id="all-categories" value="all">
            <label for="all-categories">Все категории</label>
          </div>
        </div>
      </div>
    </div>
    
    <div id="mini-recipes-grid" class="mini-recipe-grid"></div>
  </div>
</div>

<style>
/* Сетка в сайдбаре: строго 2 колонки */
.mini-recipe-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.mini-recipe-card {
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  transition: transform 0.3s, box-shadow 0.3s;
  display: flex;
  flex-direction: column;
}

.mini-recipe-card:hover { 
  transform: translateY(-4px); 
  box-shadow: 0 8px 20px rgba(0,0,0,0.12); 
}

.mini-recipe-card a { text-decoration: none; color: inherit; display: block; }

.mini-image-wrapper { 
  width: 100%; 
  aspect-ratio: 1 / 1; /* Квадратные картинки */
  position: relative; 
  overflow: hidden;
}

.mini-image-wrapper img { 
  position: absolute; 
  top:0; left:0; 
  width:100%; height:100%; 
  object-fit: cover; 
}

.mini-title-box { 
  padding: 10px 5px; 
  text-align: center; 
  min-height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.mini-title { 
  font-size: 0.85rem; 
  margin: 0; 
  color: #333; 
  line-height: 1.2; 
  font-weight: 600;
}

/* Стили выпадающего фильтра */
.filter-container { position: relative; }
.checkbox-list-container { 
  position: absolute; 
  top: 100%; 
  left: 0; 
  right: 0; 
  background: white; 
  border: 1px solid #ddd; 
  border-radius: 0 0 4px 4px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
  z-index: 100; 
  padding: 12px; 
  max-height: 250px; 
  overflow-y: auto; 
}

.hidden { display: none; }
.checkbox-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.8rem; cursor: pointer; }
.checkbox-item input { margin-right: 10px; cursor: pointer; }
.all-option { font-weight: bold; border-bottom: 1px solid #eee; margin-bottom: 10px; padding-bottom: 5px; }

/* Адаптивность */
@media (max-width: 1024px) {
  .book-page-wrapper { gap: 20px; }
}

@media (max-width: 900px) {
  .book-page-wrapper { flex-direction: column; }
  .book-main-content { flex: none; width: 100%; }
  .book-sidebar { 
    flex: none; 
    width: 100%; 
    border-left: none; 
    padding-left: 0; 
    border-top: 1px solid #eee; 
    padding-top: 30px; 
  }
  .mini-recipe-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
}
</style>
