---
layout: default
---

<div class="book-page-container" style="max-width: 1100px; margin: 0 auto; padding: 40px 20px; font-family: sans-serif;">
  
  <div style="display: flex; gap: 40px; flex-wrap: wrap;">
    
    <div style="flex: 0 0 300px; text-align: center;">
      <img id="book-cover" src="{{ page.book_cover }}" style="width: 100%; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); margin-bottom: 20px;">
      
      <a id="book-link" href="{{ page.book_link }}" target="_blank" style="display: block; background: #fa8569; color: #fff; text-decoration: none; padding: 15px; border-radius: 5px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">
        Читать книгу
      </a>
    </div>

    <div style="flex: 1; min-width: 300px;">
      <h1 id="book-title" style="margin-top: 0; font-size: 2rem; color: #333;">{{ page.book_title }}</h1>
      <p id="book-author" style="color: #888; font-style: italic; margin-bottom: 30px;">{{ page.book_author }}</p>
      
      <div id="remote-description-container">
        <div id="loader" style="color: #999;">
          <span class="spinner"></span> Загрузка описания с основного сайта...
        </div>
        <div id="book-description" style="line-height: 1.6; color: #444; font-size: 1.1rem;"></div>
      </div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const descriptionContainer = document.getElementById('book-description');
  const loader = document.getElementById('loader');
  
  // Берем slug книги, который мы передадим в эту страницу
  const bookSlug = "{{ page.book_slug }}";
  
  // URL твоего другого сайта, откуда тянем данные
  // Замени 'another-site.com' на реальный домен
  const targetUrl = `https://another-site.com/books/${bookSlug}`;

  if (bookSlug) {
    fetch(targetUrl)
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Здесь мы должны указать селектор блока на ТОМ сайте
        // Например, если там описание лежит в <div class="entry-content">
        const content = doc.querySelector('.entry-content') || doc.querySelector('article');
        
        if (content) {
          loader.style.display = 'none';
          descriptionContainer.innerHTML = content.innerHTML;
        } else {
          loader.innerText = 'Описание временно недоступно.';
        }
      })
      .catch(err => {
        console.error(err);
        loader.innerText = 'Ошибка при подключении к базе данных.';
      });
  }
});
</script>
